import{C as x,q as u,g as p,o as f,w as o,c4 as U,D as _,v as k,ah as w,t as r,E as y,z as B}from"./index-BtrInThB.js";import{_ as I,v as R}from"./PageContainer-CGes8cwD.js";import{E as S,a as q}from"./el-form-item-CPAmNvcl.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{E as D}from"./index-r43_JksV.js";import"./error-C35NM12s.js";import"./_baseClone-DQdcbTif.js";const F={class:"user-form-container"},N={__name:"UserProfile",setup(h,{expose:v}){const t=x(),m=u(!1),i=u(),a=u({id:t.user.id,username:t.user.username,nickname:t.user.nickname,email:t.user.email}),g=u({nickname:[{required:!0,message:"请输入用户昵称",trigger:"blur"},{min:2,max:10,message:"昵称长度必须在2-10个字符之间",trigger:"blur"},{pattern:/\S/,message:"昵称不能为空字符串",trigger:"blur"}],email:[{required:!0,validator:(d,e,l)=>{e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)?l():l(new Error("请输入正确的邮箱格式")):l(new Error("请输入邮箱地址"))},trigger:"blur"}]}),c=async()=>{if(i.value)try{await i.value.validate(),m.value=!0,await U(a.value),_.success("提交成功！"),t.getUser(),m.value=!1}catch(d){console.log("校验失败:",d),_.error("请检查表单内容")}};return v({submitForm:c,formData:a}),(d,e)=>{const l=D,s=q,E=y,V=S,b=R;return f(),p(I,{title:"用户资料"},{default:o(()=>[k("div",F,[w((f(),p(V,{ref_key:"formRef",ref:i,model:a.value,rules:g.value,"label-width":"100px",class:"user-form"},{default:o(()=>[r(s,{label:"登录名称",prop:"username"},{default:o(()=>[r(l,{modelValue:a.value.username,"onUpdate:modelValue":e[0]||(e[0]=n=>a.value.username=n),disabled:"",placeholder:"登录名称"},null,8,["modelValue"])]),_:1}),r(s,{label:"用户昵称",prop:"nickname"},{default:o(()=>[r(l,{modelValue:a.value.nickname,"onUpdate:modelValue":e[1]||(e[1]=n=>a.value.nickname=n),placeholder:"请输入用户昵称",clearable:""},null,8,["modelValue"])]),_:1}),r(s,{label:"用户邮箱",prop:"email"},{default:o(()=>[r(l,{modelValue:a.value.email,"onUpdate:modelValue":e[2]||(e[2]=n=>a.value.email=n),placeholder:"请输入用户邮箱",clearable:""},null,8,["modelValue"])]),_:1}),r(s,null,{default:o(()=>[r(E,{type:"primary",onClick:c},{default:o(()=>[...e[3]||(e[3]=[B(" 提交修改 ",-1)])]),_:1})]),_:1})]),_:1},8,["model","rules"])),[[b,m.value]])])]),_:1})}}},G=C(N,[["__scopeId","data-v-9258cec6"]]);export{G as default};
